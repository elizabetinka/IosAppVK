## Пример работ:

*может не сразу подгрузиться видео из git lfs. Если что оно лежит Screenshots/video.gif 
или тут https://youtu.be/Q_s9XHhf8OM

![Demo](Screenshots/video.gif)

## Что я сделала?

1 коммит
+ верстка "максимальный вариант" без ячейки количества отзывов
+ Добавлена возможность указывать url для фотографии в json
+ Добавлено загрузка фотографий из сети и кеширование (+ activityIndicator для фотографий отзыва)
+ Добавила в onStateChange гарантию, что изменение данных будет происходить в main thread

2 коммит
+ Добавила Info.plist, в котором задаются параметры RequestTimeoutInterval и ResourceTimeoutInterval

3 коммит
+ при пагинированном запросе не учитывалась переменная limit и возвращалось больше чем надо элементов, добавила обрезку
+ Добавила ячейку с количеством отзывов

4 коммит 
+ Поправила проблему с плавностью скроллинга. Перенесла выгрузку отзывов в background  поток

5 коммит
+ прикрепила action к кнопке «Показать полностью...»

6 коммит
+ убрала утечки памяти {
		Между RootViewController и RootView через поле onTapReviews
		Между ReviewsViewModel и ReviewCellConfig через поле onTapShowMore }

7 коммит
+ добавила Pull-to-refresh

8 коммит 
+ добавила индикатор загрузки когда делается первый запрос отзывов

9 коммит
+ добавила кастомный индикатор загрузки. Есть возможность менять ему размер и форму(дуга, квадрат, треугольник)

10 коммит
+ добавила обработку ошибок для ReviewProvider. Теперь они отражаются на UIAlertController

11 коммит
+ добавила экран просмотра фото с возможностью их листать



## Предложения по улучшению:
+ проблемы с UI-перформансом. Сейчас при каждом уходе и возвращении  на экран с отзывами ReviewsViewController пересоздается. Предлагаю решить эту проблему добавлением сущности Coordinator. Которая хранила бы контроллеры, и их не надо было бы пересоздавать
+ Предлагаю переделать верстку на Auto Layout. Это менее производительно, но более адаптивно к разным экранам. К тому  же сейчас в проекте комбинируется и подход верстки с Auto Layout и верстка фреймами. Это несовместимо
+ Для улучшения UI-перформанса можно хранить кеш отзывов и кеш высот ячеек с отзывами


## Блок обязательных задач

- [x] Доделать вёрстку ячейки отзыва до состояния, отображённого на скриншоте ("Минимальный вариант")
  - [x] Добавить аватар пользователя в ячейку. В файле Resources/Assets добавлено изображение, которое нужно использовать в качестве аватара. Нужно сделать изображение с закруглёнными краями. Все размеры и отступы есть в коде проекта в виде констант.
  - [x]  Добавить имя пользователя в ячейку. Имя пользователя состоит из first_name и last_name (из json файла) с одним пробелом между ними.
  - [x]   Добавить изображение рейтинга в ячейку. Само изображение можно получить, вызвав метод ratingRenderer.ratingImage(rating:) и передав туда рейтинг конкретного отзыва (поле rating). 

- [x] Добавить новую ячейку, которая будет последней в списке отзывов, в которой будет один текст посередине, отображающий общее количество отзывов (см. скриншот "Ячейка количества отзывов").
- [x] Найти утечки памяти и исправить их.
- [x] Найти проблему с UI-перформансом (плавностью скроллинга) и исправить её.


## Блок желательный задач

- [x] Использовать Airbnb код-стайл
- [x] В ячейке отзыва текст обрезается до трёх строк. Если количество строк текста больше, то отображается кнопка «Показать полностью...». Часть логики её работы написана, но не вся. Нужно сделать так, чтобы кнопка стала рабочей, т. е. при нажатии на неё текст должен раскрываться (без анимации).

## Блок более сложных задач

- [x] Добавить в json файл в объект отзыва поля "avatar_url" и/или "photo_urls" с валидными ссылками на изображения и сделать асинхронную загрузку этих изображений. Ссылок должно быть не менее двух разных (при этом можно скопировать в разные отзывы одни и те же ссылки). Будет хорошо, если также будет предусмотрено кэширование изображений.
- [x] В дополнение к задаче 2 в блоке дополнительных задач вместо стандартного индикатора загрузки нарисовать свой, используя анимации на слоях (CALayer).

## Блок дополнительных задач

- [x] Реализовать Pull-to-refresh.
- [x] Добавить состояние загрузки отзывов. Когда делается первый запрос отзывов - показать индикатор загрузки (можно использовать стандартный, а можно сделать свой).
- [x] Добавить в ячейку отзыва фото. Фото в ячейке может быть от 0 от 5. В качестве фото можно использовать изображения, добавленные в Assets проекта, либо сделать асинхронную загрузку изображений (см. блок более сложных заданий).
- [x] Любые другие улучшения функциональности (по желанию, например, экран просмотра фото).
- [x]  Поисследовать, какие проблемы с UI-перформансом бывают в целом (помимо той, что в одном из заданий выше). Может, какие-то из этих проблем есть и в этом проекте. Здесь ничего дополнительно исправлять не надо.

# Test
Стартовый проект для тестового задания в команду ВК.\
*WARNING:* В проекте намеренно допущены ошибки.

## Примеры выполненного задания:

Минимальный вариант|Максимальный вариант|Ячейка количества отзывов
-|-|-
![Минимальный вариант](/Screenshots/1.png) | ![Максимальный вариант](/Screenshots/2.png) | ![Ячейка количества отзывов](/Screenshots/3.png)
